<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>acq2106_hts &mdash; acq400_hapi aae86601b7b4611f2feb451bfafd648b6a2022e7 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom_style.css" type="text/css" />
    <link rel="shortcut icon" href="_static/d-tacq_logo.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/design-tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="acq2106_set_sync_role" href="user_apps.acq2106.acq2106_set_sync_role.html" />
    <link rel="prev" title="acq2106" href="user_apps.acq2106.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/d-tacq_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="acq400_hapi.html">acq400_hapi</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_apps.html">user_apps</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">acq400_hapi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="user_apps.html">user_apps</a></li>
          <li class="breadcrumb-item"><a href="user_apps.acq2106.html">acq2106</a></li>
      <li class="breadcrumb-item active">acq2106_hts</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="acq2106-hts">
<h1>acq2106_hts<a class="headerlink" href="#acq2106-hts" title="Permalink to this heading"></a></h1>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Usage<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">acq2106_hts</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">clk</span> <span class="n">CLK</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trg</span> <span class="n">TRG</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">sim</span> <span class="n">SIM</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trace</span> <span class="n">TRACE</span><span class="p">]</span>
                      <span class="p">[</span><span class="o">--</span><span class="n">auto_soft_trigger</span> <span class="n">AUTO_SOFT_TRIGGER</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">clear_counters</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">nowait</span> <span class="n">NOWAIT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">secs</span> <span class="n">SECS</span><span class="p">]</span>
                      <span class="p">[</span><span class="o">--</span><span class="n">spad</span> <span class="n">SPAD</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">commsA</span> <span class="n">COMMSA</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">commsB</span> <span class="n">COMMSB</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">lport</span> <span class="n">LPORT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">hexdump</span> <span class="n">HEXDUMP</span><span class="p">]</span>
                      <span class="p">[</span><span class="o">--</span><span class="n">decimate</span> <span class="n">DECIMATE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">datahandler</span> <span class="n">DATAHANDLER</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">nbuffers</span> <span class="n">NBUFFERS</span><span class="p">]</span>
                      <span class="n">uut</span> <span class="p">[</span><span class="n">uut</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<section id="positional-arguments">
<h2>Positional Arguments<a class="headerlink" href="#positional-arguments" title="Permalink to this heading"></a></h2>
<dl class="option-list">
<dt><kbd>uut</kbd></dt>
<dd><p class="sd-card-text">uut</p>
</dd>
</dl>
</section>
<section id="named-arguments">
<h2>Named Arguments<a class="headerlink" href="#named-arguments" title="Permalink to this heading"></a></h2>
<dl class="option-list">
<dt><kbd>--clk</kbd></dt>
<dd><p class="sd-card-text">int|ext|zclk|xclk,fpclk,SR,[FIN]</p>
</dd>
<dt><kbd>--trg</kbd></dt>
<dd><p class="sd-card-text">int|ext,rising|falling</p>
</dd>
<dt><kbd>--sim</kbd></dt>
<dd><p class="sd-card-text">s1[,s2,s3..] list of sites to run in simulate mode</p>
</dd>
<dt><kbd>--trace</kbd></dt>
<dd><p class="sd-card-text">1 : enable command tracing</p>
</dd>
<dt><kbd>--auto_soft_trigger</kbd></dt>
<dd><p class="sd-card-text">force soft trigger generation</p>
<p class="sd-card-text">Default: 0</p>
</dd>
<dt><kbd>--clear_counters</kbd></dt>
<dd><p class="sd-card-text">clear all counters SLOW</p>
<p class="sd-card-text">Default: False</p>
</dd>
<dt><kbd>--nowait</kbd></dt>
<dd><p class="sd-card-text">start the shot but do not wait for completion</p>
<p class="sd-card-text">Default: 0</p>
</dd>
<dt><kbd>--secs</kbd></dt>
<dd><p class="sd-card-text">capture seconds [default:0 inifinity]</p>
<p class="sd-card-text">Default: 999999</p>
</dd>
<dt><kbd>--spad</kbd></dt>
<dd><p class="sd-card-text">scratchpad, eg 1,16,0</p>
</dd>
<dt><kbd>--commsA</kbd></dt>
<dd><p class="sd-card-text">custom list of sites for commsA</p>
<p class="sd-card-text">Default: “all”</p>
</dd>
<dt><kbd>--commsB</kbd></dt>
<dd><p class="sd-card-text">custom list of sites for commsB</p>
<p class="sd-card-text">Default: “none”</p>
</dd>
<dt><kbd>--lport</kbd></dt>
<dd><p class="sd-card-text">local port on ahfba</p>
<p class="sd-card-text">Default: 0</p>
</dd>
<dt><kbd>--hexdump</kbd></dt>
<dd><p class="sd-card-text">generate hexdump format string</p>
<p class="sd-card-text">Default: 0</p>
</dd>
<dt><kbd>--decimate</kbd></dt>
<dd><p class="sd-card-text">decimate arm data path</p>
</dd>
<dt><kbd>--datahandler</kbd></dt>
<dd><p class="sd-card-text">program to stream the data</p>
</dd>
<dt><kbd>--nbuffers</kbd></dt>
<dd><p class="sd-card-text">set capture length in buffers</p>
<p class="sd-card-text">Default: 9999999999</p>
</dd>
</dl>
</section>
</div>
</details><section id="module-user_apps.acq2106.acq2106_hts">
<span id="outline"></span><h2>Outline:<a class="headerlink" href="#module-user_apps.acq2106.acq2106_hts" title="Permalink to this heading"></a></h2>
<p>acq2106_hts High Throughput Streaming</p>
<blockquote>
<div><ul class="simple">
<li><p>data on local SFP/AFHBA</p></li>
<li><p>control on Ethernet</p></li>
<li><p>replaces AFHBA404/scripts/hts-test-harness-*</p></li>
</ul>
</div></blockquote>
<p>example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># act on acq2106_061, run for 3600s</span>
<span class="o">./</span><span class="n">acq2106_hts</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">trg</span><span class="o">=</span><span class="n">notouch</span> <span class="o">--</span><span class="n">secs</span><span class="o">=</span><span class="mi">3600</span> <span class="n">acq2106_061</span>


<span class="c1"># capture 2000 buffers, to one cycle of files on ramdisk. (data is overwritten, but it&#39;s unlikely your computer will run out of memory)</span>
<span class="c1"># &quot;RECYCLE mode&quot;</span>
<span class="o">./</span><span class="n">user_apps</span><span class="o">/</span><span class="n">acq2106</span><span class="o">/</span><span class="n">acq2106_hts</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">nbuffers</span><span class="o">=</span><span class="mi">2000</span> <span class="o">--</span><span class="n">datahandler</span><span class="o">=</span><span class="s1">&#39;./scripts/run-stream-ramdisk </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span> <span class="n">acq2106_364</span>


<span class="c1"># capture 2000 buffers, to NBUFFERS cycles of files, storing all 2000 buffers on ramdisk.</span>
<span class="c1"># WARNING: we assume that your HOSTPC has enough memory to do this! 2000 buffers of 1MB =&gt; 2GB, that&#39;s probably OK.</span>
<span class="c1"># But, 20k buffers would need a computer with serious memory (32GB) and 200kbuffers is probably infeasible, instead streaming to a fast disk system is recommended.</span>
<span class="o">./</span><span class="n">user_apps</span><span class="o">/</span><span class="n">acq2106</span><span class="o">/</span><span class="n">acq2106_hts</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">nbuffers</span><span class="o">=</span><span class="mi">2000</span> <span class="o">--</span><span class="n">datahandler</span><span class="o">=</span><span class="s1">&#39;./scripts/run-stream-ramdisk </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> 0&#39;</span> <span class="n">acq2106_364</span>
</pre></div>
</div>
<p>acq2106_hts.py will quit on the first of either elapsed_seconds &gt; secs or buffers == nbuffers</p>
<p>Recommendation: –secs is really a timeout, use –nbuffers for exact data length</p>
<dl class="simple hidden">
<dt>usage::</dt><dd><dl class="simple">
<dt>acq2106_hts.py [-h] [–pre PRE] [–clk CLK] [–trg TRG] [–sim SIM]</dt><dd><p>[–trace TRACE] [–nowait NOWAIT] [–secs SECS]
[–spad SPAD] [–commsA COMMSA] [–commsB COMMSB]
[–lport LPORT] [–hexdump HEXDUMP]
[–decimate DECIMATE] [–datahandler DATAHANDLER]
[–nbuffers NBUFFERS]
uut [uut …]</p>
</dd>
</dl>
</dd>
</dl>
<p class="hidden">configure acq2106 High Throughput Stream</p>
<p class="hidden">positional arguments:
uut                   uut</p>
<p class="hidden">optional arguments:
-h, –help            show this help message and exit
–pre PRE             pre-trigger samples
–clk CLK             int|ext|zclk|xclk,fpclk,SR,[FIN]
–trg TRG             int|ext,rising|falling
–sim SIM             s1[,s2,s3..] list of sites to run in simulate mode
–trace TRACE         1 : enable command tracing
–nowait NOWAIT       start the shot but do not wait for completion
–secs SECS           capture seconds [default:0 inifinity]
–spad SPAD           scratchpad, eg 1,16,0
–commsA COMMSA       custom list of sites for commsA
–commsB COMMSB       custom list of sites for commsB
–lport LPORT         local port on ahfba
–hexdump HEXDUMP     generate hexdump format string
–decimate DECIMATE   decimate arm data path
–datahandler DATAHANDLER  program to stream the data
–nbuffers NBUFFERS   set capture length in buffers
–secs     : maximum run time for acq2106_hts, only starts counting once data is flowing
–nbuffers : data handler will stream max this number of buffers (1MB or 4MB)</p>
<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.read_knob">
<span class="sig-name descname"><span class="pre">read_knob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">knob</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#read_knob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.read_knob" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.config_shot">
<span class="sig-name descname"><span class="pre">config_shot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#config_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.config_shot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.hexdump_string">
<span class="sig-name descname"><span class="pre">hexdump_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sites</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spad</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#hexdump_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.hexdump_string" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.init_comms">
<span class="sig-name descname"><span class="pre">init_comms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#init_comms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.init_comms" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.init_work">
<span class="sig-name descname"><span class="pre">init_work</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#init_work"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.init_work" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.get_data_pid">
<span class="sig-name descname"><span class="pre">get_data_pid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#get_data_pid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.get_data_pid" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.start_shot">
<span class="sig-name descname"><span class="pre">start_shot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#start_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.start_shot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.stop_shot">
<span class="sig-name descname"><span class="pre">stop_shot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#stop_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.stop_shot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.get_state">
<span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#get_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.get_state" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.wait_completion">
<span class="sig-name descname"><span class="pre">wait_completion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#wait_completion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.wait_completion" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.run_shot">
<span class="sig-name descname"><span class="pre">run_shot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#run_shot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.run_shot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="user_apps.acq2106.acq2106_hts.get_parser">
<span class="sig-name descname"><span class="pre">get_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/user_apps/acq2106/acq2106_hts.html#get_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#user_apps.acq2106.acq2106_hts.get_parser" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, D-Tacq.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>